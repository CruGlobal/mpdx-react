# These are all the salary request field that will be reload when a salary request is updated
fragment SalaryRequestFields on SalaryRequest {
  effectiveDate
  location
  mhaAmount
  spouseMhaAmount
  salaryCap
  spouseSalaryCap
  salary
  spouseSalary
  status
  additionalInfo
  phoneNumber
  emailAddress
  submittedAt
  updatedAt
  splitCapRequired
  calculations {
    ...CalculationFields
  }
  spouseCalculations {
    ...CalculationFields
  }
  progressiveApprovalTier {
    id
    tier
    approver
    approvalTimeframe
  }
}

fragment CalculationFields on SalaryRequestCalculations {
  annualBase
  additionalSalary
  individualMultiplier
  geographicAdjustment
  geographicMultiplier
  tenureAdjustment
  oldSalaryCap
  oldSecaAmount
  secaEstimatedFraction
  capWithSeca
  contributing403bFraction
  non403bFraction
  calculatedCap
  effectiveCap
  hardCap
  exceptionCap
  combinedCap
  minimumRequiredSalary
  minimumRequestedSalary
  requestedSeca
  requestedWithSeca
  requestedGross
  requestedAboveMinimum
  requestedMha
  requestedAboveMha
  taxableCompensation
  contributing403bAmount
  contributingTaxDeferredAmount
  contributingRothAmount
  annualCompensation
}

query SalaryCalculation($id: ID!) {
  salaryRequest(id: $id) {
    id
    ...SalaryRequestFields
  }
}

query ApprovedSalaryCalculation {
  salaryRequest: latestSalaryRequest(status: [APPROVED]) {
    id
    mhaAmount
    spouseMhaAmount
    salaryCap
    spouseSalaryCap
    salary
    spouseSalary

    calculations {
      contributing403bFraction
    }
    spouseCalculations {
      contributing403bFraction
    }
  }
}
