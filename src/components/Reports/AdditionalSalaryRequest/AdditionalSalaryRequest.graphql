fragment AdditionalSalaryRequestFields on AdditionalSalaryRequest {
  id
  currentYearSalaryNotReceived
  previousYearSalaryNotReceived
  phoneNumber
  emailAddress
  status
  feedback
  user {
    id
    firstName
    lastName
  }
}

fragment AdditionalSalaryRequestDetailsFields on AdditionalSalaryRequest {
  ...AdditionalSalaryRequestFields
  changesRequestedAt
  personNumber
  additionalSalaryWithinMax
  adoption
  traditional403bContribution
  roth403bContribution
  counselingNonMedical
  healthcareExpensesExceedingLimit
  babysittingMinistryEvents
  childrenMinistryTripExpenses
  childrenCollegeEducation
  movingExpense
  seminary
  housingDownPayment
  autoPurchase
  expensesNotApprovedWithin90Days
  totalAdditionalSalaryRequested
  additionalInfo
  deductTaxDeferredPercent
  deductRothPercent
  traditional403bContributionRequested
  usingSpouseSalary
  phoneNumber
  approvedAt
  submittedAt
  updatedAt
  progressiveApprovalTier {
    id
    approver
    approvalTimeframe
  }
  calculations {
    currentSalaryCap
    combinedCap
    staffAccountBalance
    pendingAsrAmount
  }
  spouseCalculations {
    currentSalaryCap
    pendingAsrAmount
    staffAccountBalance
  }
}

query AdditionalSalaryRequest($isSpouse: Boolean) {
  latestAdditionalSalaryRequest(
    status: [IN_PROGRESS, ACTION_REQUIRED, PENDING]
    isSpouse: $isSpouse
  ) {
    ...AdditionalSalaryRequestDetailsFields
    createdAt
  }
}

mutation CreateAdditionalSalaryRequest(
  $attributes: AdditionalSalaryRequestAttributesInput
  $isSpouse: Boolean
) {
  createAdditionalSalaryRequest(
    input: { attributes: $attributes, isSpouse: $isSpouse }
  ) {
    additionalSalaryRequest {
      ...AdditionalSalaryRequestDetailsFields
    }
  }
}

mutation DeleteAdditionalSalaryRequest($id: ID!) {
  deleteAdditionalSalaryRequest(input: { id: $id }) {
    id
  }
}

mutation SubmitAdditionalSalaryRequest($id: ID!) {
  submitAdditionalSalaryRequest(input: { id: $id }) {
    additionalSalaryRequest {
      ...AdditionalSalaryRequestDetailsFields
    }
  }
}

mutation UpdateAdditionalSalaryRequest(
  $id: ID!
  $attributes: AdditionalSalaryRequestAttributesInput!
) {
  updateAdditionalSalaryRequest(input: { id: $id, attributes: $attributes }) {
    additionalSalaryRequest {
      ...AdditionalSalaryRequestDetailsFields
    }
  }
}
