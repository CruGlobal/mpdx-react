fragment AdditionalSalaryRequestFields on AdditionalSalaryRequest {
  id
  currentYearSalaryNotReceived
  previousYearSalaryNotReceived
  phoneNumber
  emailAddress
  status
  feedback
  user {
    id
    firstName
    lastName
  }
}

fragment AdditionalSalaryRequestDetailsFields on AdditionalSalaryRequest {
  ...AdditionalSalaryRequestFields
  personNumber
  additionalSalaryWithinMax
  adoption
  traditional403bContribution
  roth403bContribution
  counselingNonMedical
  healthcareExpensesExceedingLimit
  babysittingMinistryEvents
  childrenMinistryTripExpenses
  childrenCollegeEducation
  movingExpense
  seminary
  housingDownPayment
  autoPurchase
  expensesNotApprovedWithin90Days
  totalAdditionalSalaryRequested
  deductTaxDeferredPercent
  traditional403bContributionRequested
  usingSpouseSalary
  phoneNumber
  approvedAt
  submittedAt
  updatedAt
  calculations {
    currentSalaryCap
    staffAccountBalance
    predictedYearIncome
    pendingAsrAmount
    maxAmountAndReason {
      amount
      reason
    }
  }
  spouseCalculations {
    currentSalaryCap
    staffAccountBalance
  }
}

query AdditionalSalaryRequest {
  latestAdditionalSalaryRequest(
    status: [IN_PROGRESS, ACTION_REQUIRED, PENDING]
  ) {
    ...AdditionalSalaryRequestDetailsFields
    createdAt
  }
}

query SalaryInfo($year: Int!) {
  salaryInfo(year: $year) {
    id
    year
    annualBase
    fourOhThreeBAnnualLimitForOverFifty
    fourOhThreeBAnnualLimitForSixtyToSixtyThree
    maxFamilyInt
    maxFamilyUss
    maxSingleInt
    maxSingleUss
    minReqSalary
    minRequiredSalary
    raisingSupportMinReqSalary
    secaEstimate
    secaestAt403bInt
    secaestNo403bInt
    secaestPt403bInt
    maxAdoptionInt
    maxAdoptionUss
    maxAutoPurchaseInt
    maxAutoPurchaseUss
    maxCollegeInt
    maxCollegeUss
    maxHousingDownPaymentInt
    maxHousingDownPaymentUss
  }
}

mutation CreateAdditionalSalaryRequest(
  $attributes: AdditionalSalaryRequestAttributesInput
) {
  createAdditionalSalaryRequest(input: { attributes: $attributes }) {
    additionalSalaryRequest {
      ...AdditionalSalaryRequestDetailsFields
    }
  }
}

mutation DeleteAdditionalSalaryRequest($id: ID!) {
  deleteAdditionalSalaryRequest(input: { id: $id }) {
    id
  }
}

mutation SubmitAdditionalSalaryRequest($id: ID!) {
  submitAdditionalSalaryRequest(input: { id: $id }) {
    additionalSalaryRequest {
      ...AdditionalSalaryRequestDetailsFields
    }
  }
}

mutation UpdateAdditionalSalaryRequest(
  $id: ID!
  $attributes: AdditionalSalaryRequestAttributesInput!
) {
  updateAdditionalSalaryRequest(input: { id: $id, attributes: $attributes }) {
    additionalSalaryRequest {
      ...AdditionalSalaryRequestDetailsFields
    }
  }
}
